<form action="{?=url(ADMIN.'/penjualan/savebarang')?}" method="POST">
  <div class="panel panel-default">
      <div class="panel-heading">
          <h3 class="panel-title">
            Data Aset
          </h3>
      </div>
      <div class="panel-body">
          <div class="row">
              <div class="col-md-6">
                  <div class="form-group" id="id_barang">
                      <label>ID Barang</label>
                      <input type="text" name="id" class="form-control" value="" />
                  </div>
                  <div class="form-group">
                    <label>Nama Barang</label>
                    <input type="text" name="nama_barang" class="form-control" value="" />
                  </div>
                  <div class="form-group">
                    <label>Harga</label>
                    <input type="text" name="harga" class="form-control" value="" />
                  </div>
                  <div class="form-group">
                      <label>Stok</label>
                      <input type="text" name="stok" class="form-control" value="" />
                  </div>
                  <div class="form-group">
                    <label>Keterangan</label>
                    <input type="text" name="keterangan" class="form-control" value="" />
                  </div>
            </div>
              <div class="col-md-12" style="padding-top: 20px;">
                  <input type="submit" name="simpan" class="btn btn-success" value="Simpan" />
                  <input type="submit" name="update" class="btn btn-info" value="Update" />
                  <input type="submit" name="hapus" class="btn btn-danger" value="Hapus" />
              </div>
          </div>
      </div>
  </div>
</form>

<div class="panel panel-default">
    <div class="panel-body">
      <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a href="#barang" aria-controls="barang" role="tab" data-toggle="tab">Barang</a></li>
        <li role="presentation"><a href="#obat" aria-controls="obat" role="tab" data-toggle="tab">Obat</a></li>
      </ul>
      <div class="tab-content" style="margin-top: 20px;">
        <div role="tabpanel" class="tab-pane fade in active" id="barang">
          <div class="table-responsive no-margin" id="barang_penjualan">
            <table class="table table-stripped dataTables" width="100%">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nama Barang</th>
                  <th>Harga</th>
                  <th>Stok</th>
                </tr>
              </thead>
              <tbody>
                {if: $barang}
                {loop: $barang}
                <tr class="barang_penjualan" 
                  data-id="{$value.id}" 
                  data-nama_barang="{$value.nama_barang}" 
                  data-harga="{$value.harga}"
                  data-stok="{$value.stok}"
                  data-keterangan="{$value.keterangan}"
                >
                  <td>{$value.id}</td>
                  <td>{$value.nama_barang}</td>
                  <td>Rp. <span class="pull-right">{?= number_format($value.harga,2,',','.')?}</span></td>
                  <td>{$value.stok}</td>
                </tr>
                {/loop}
                {else}
                <tr>
                  <td colspan="4"class="text-center">Data barang jualan tidak ditemukan.</td>
                </tr>
                {/if}
              </tbody>
            </table>
          </div>          
        </div>
        <div role="tabpanel" class="tab-pane fade in" id="obat">
          <div class="table-responsive no-margin" id="barang_penjualan">
            <table class="table table-stripped dataTables" width="100%">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nama Obat</th>
                  <th>Harga</th>
                  <th>Stok</th>
                </tr>
              </thead>
              <tbody>
                {if: $obat}
                {loop: $obat}
                <tr 
                  data-id="{$value.id}" 
                  data-nama_barang="{$value.nama_barang}" 
                  data-harga="{$value.harga}"
                  data-stok="{$value.stok}"
                >
                  <td>{$value.id}</td>
                  <td>{$value.nama_barang}</td>
                  <td>Rp. <span class="pull-right">{?= number_format($value.harga,2,',','.')?}</span></td>
                  <td>{$value.stok}</td>
                </tr>
                {/loop}
                {else}
                <tr>
                  <td colspan="4"class="text-center">Data obat jualan tidak ditemukan.</td>
                </tr>
                {/if}
              </tbody>
            </table>
          </div>           
        </div>
      </div>
    </div>
</div>

<script>
$('.dataTables').DataTable();
</script>
<script type="text/javascript">
  $("#id_barang").hide();
  $("#barang_penjualan").on("click", ".barang_penjualan", function(event){
    var id  = $(this).attr("data-id");
    var nama_barang  = $(this).attr("data-nama_barang");
    var harga  = $(this).attr("data-harga");
    var stok  = $(this).attr("data-stok");
    var keterangan  = $(this).attr("data-keterangan");
    $('input:text[name=id]').val(id);
    $('input:text[name=nama_barang]').val(nama_barang);
    $('input:text[name=harga]').val(harga);
    $('input:text[name=stok]').val(stok);
    $('input:text[name=keterangan]').val(keterangan);
    $("#id_barang").show();
    $('input:text[name=id]').prop('readonly', true);
  });
  </script>
