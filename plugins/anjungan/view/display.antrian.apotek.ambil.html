
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=0.1">
    <title>{$title} - {$settings.nama_instansi}</title>
    <link rel="icon" href="{?=url()?}/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="{?=url(MODULES)?}/anjungan/css/bootstrap.min.css">
    <link href="{?=url()?}/assets/css/font-awesome.css" rel="stylesheet">
    <link href="{?=url(MODULES)?}/anjungan/css/gijgo.min.css" rel="stylesheet" type="text/css" />
    <link href="{?=url(MODULES)?}/anjungan/css/jquery-ui.min.css" rel="stylesheet">
  	<link href="{?=url(MODULES)?}/anjungan/css/keyboard.css" rel="stylesheet">
    <style media="screen">
      body {
        font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
      	background: #0264d6;
        margin:0;
      	height:calc(100vh);
      	width:100%;
      }
      .modal-full {
        min-width: 100%;
        margin: 0;
      }
      .modal-full .modal-content {
        min-height: 100vh;
      }
      .modal-fix {
        min-width: 1024px;
        margin: 0;
      }
      .modal-fix .modal-content {
        min-height: 100vh;
      }
      .modal .tab-content {
        min-height: 50vh;
      }
      .nav-pills.nav-wizard > li {
        position: relative;
        overflow: visible;
        border-right: 8px solid transparent;
        border-left: 8px solid transparent;
      }

      .nav-pills.nav-wizard > li + li {
        margin-left: 0;
      }

      .nav-pills.nav-wizard > li:first-child {
        border-left: 0;
      }

      .nav-pills.nav-wizard > li:first-child a {
        border-radius: 5px 0 0 5px;
      }

      .nav-pills.nav-wizard > li:last-child {
        border-right: 0;
      }

      .nav-pills.nav-wizard > li:last-child a {
        border-radius: 0 5px 5px 0;
      }

      .nav-pills.nav-wizard > li a {
        border-radius: 0;
        background-color: #eee;
      }

      .nav-pills.nav-wizard > li:not(:last-child) a:after {
        position: absolute;
        content: "";
        top: 0px;
        right: -20px;
        width: 0px;
        height: 0px;
        border-style: solid;
        border-width: 20px 0 20px 20px;
        border-color: transparent transparent transparent #eee;
        z-index: 150;
      }

      .nav-pills.nav-wizard > li:not(:first-child) a:before {
        position: absolute;
        content: "";
        top: 0px;
        left: -20px;
        width: 0px;
        height: 0px;
        border-style: solid;
        border-width: 20px 0 20px 20px;
        border-color: #eee #eee #eee transparent;
        z-index: 150;
      }

      .nav-pills.nav-wizard > li:hover:not(:last-child) a:after {
        border-color: transparent transparent transparent #aaa;
      }

      .nav-pills.nav-wizard > li:hover:not(:first-child) a:before {
        border-color: #aaa #aaa #aaa transparent;
      }

      .nav-pills.nav-wizard > li:hover a {
        background-color: #aaa;
        color: #fff;
      }

      .nav-pills.nav-wizard > li:not(:last-child) a.active:after {
        border-color: transparent transparent transparent #428bca;
      }

      .nav-pills.nav-wizard > li:not(:first-child) a.active:before {
        border-color: #428bca #428bca #428bca transparent;
      }

      .nav-pills.nav-wizard > li a.active {
        background-color: #428bca;
      }
      div.ui-keyboard {
        z-index: 2000;
      }
      footer {
          position: fixed;
          right: 0px;
          bottom: 0px;
          height: 40px;
          width: calc(100% - 0px);
          font-size: 14px;
          color: #fff;
      }
      footer a, footer a:hover {
        color: #fff;
      }
    </style>
</head>
<body>
<div class="container-fluid">
  <div class="mx-auto text-center text-white mb-5 mt-5">
    <img src="{?=url()?}/{$logo}" width="150"><br>
    <h2 class="display-6">Anjungan Pasien Mandiri Pelayanan Rawat Jalan</h3>
    <h1 class="display-5">Antrian Apotek {$settings.nama_instansi}</h2>
  </div>

  <div class="container">
    <div class="row">
      <div class="col-6 offset-3">
        <div class="card-deck mb-3 text-center">
          <div class="card mb-6 shadow-sm" data-toggle="modal" data-target="#antrian">
            <div class="card-body btn btn-lg btn-success">
              <ul class="list-unstyled mt-3 mb-4">
                <span style="font-size: 100px; color: white;"><i class="fa fa-question"></i></span>
              </ul>
              <a href="#" style="text-decoration: none; color: white;"><h1 class="display-4">ANTRIAN APOTEK</h1></a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
<footer class="visible-lg visible-md bg-primary" style="padding:10px;z-index:1000;">
  <div class="canvas">
    <p class="pull-right">
      Made with <i class="fa fa-heart text-danger"></i> by <a href="https://basoro.id/" target="_blank"><b>drg. F. Basoro</b>.</a>
      {$powered}.
    </p>
    <p><i class="fa fa-fw fa-calendar"></i> <span>{$tanggal}</span> <i class="fa fa-fw fa-clock-o"></i><span id="clock"></span> <i class="fa fa-fw fa-user"></i> <span>{?= sprintf('Login sebagai <strong>%s</strong>', $username) ?}</span></p>
  </div>
</footer>
<!-- Modal Antrian -->
<div class="modal fade" id="antrian" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalCenterTitle">Antrian Loket</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" style="padding-top:30px;">
        <div class="row justify-content-around">
        <div class="col-8 pt-3 pb-x3">
          <div id="printAntrianLoket" style="display: none;" class="cetak">
            <div style="width: 200px; font-family: Tahoma; margin-top: 10px; margin-right: 5px; margin-bottom: 100px; margin-left: 15px; font-size: 21px !important;border: 0px solid #000;">
              <p style="font-size:12px;" align="center">{$settings.nama_instansi}<br><span class="small">{$settings.alamat}<br>Telp: {$settings.nomor_telepon}</span></p>
              <hr>
              <div id="print_nomor_loket"></div>
              <p align="center">Antrian Apotek</p>
            </div>
          </div>
          <div id="display_nomor_loket"></div>
          <form role="form" id="formloket" name="formloket">
            <input type="text" name="no_rkm_medis" class="form-control form-control-lg" id="norm" value="" placeholder="Nomor Rekam Medik" style="height:50px;margin-bottom:30px;">
            <button type="submit" class="btn btn-lg btn-danger btn-block" style="padding: 30px;font-size:42px;" id="btnKRM" value="Submit" name="btnKRM" onclick="printDiv('printAntrianLoket');">AMBIL ANTRIAN</button>
          </form>
        </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Tutup</button>
      </div>
    </div>
  </div>
</div>

<!-- Optional JavaScript -->
<script src="{?=url(MODULES)?}/anjungan/js/jquery.min.js"></script>
<script src="{?=url(MODULES)?}/anjungan/js/popper.min.js"></script>
<script src="{?=url(MODULES)?}/anjungan/js/bootstrap.min.js"></script>
<script src="{?=url(MODULES)?}/anjungan/js/gijgo.min.js" type="text/javascript"></script>
<script src="{?=url(MODULES)?}/anjungan/js/jquery-ui-custom.min.js"></script>
<script src="{?=url(MODULES)?}/anjungan/js/jquery.keyboard.js"></script>
<script src="{?=url(MODULES)?}/anjungan/js/jquery.mousewheel.js"></script>
<script type="text/javascript">
function showTime() {
    var a_p = "";
    var today = new Date();
    var curr_hour = today.getHours();
    var curr_minute = today.getMinutes();
    var curr_second = today.getSeconds();
    if (curr_hour < 12) {
        a_p = "AM";
    } else {
        a_p = "PM";
    }
    if (curr_hour == 0) {
        curr_hour = 12;
    }
    if (curr_hour > 12) {
        curr_hour = curr_hour - 12;
    }
    curr_hour = checkTime(curr_hour);
    curr_minute = checkTime(curr_minute);
    curr_second = checkTime(curr_second);
    document.getElementById('clock').innerHTML = curr_hour + ":" + curr_minute + ":" + curr_second + " " + a_p;
    }

function checkTime(i) {
    if (i < 10) {
        i = "0" + i;
    }
    return i;
}
setInterval(showTime, 500);
</script>
<script type="text/javascript">
$(document).ready(function() {
  setInterval(function(){
    $("#display_nomor_loket").load("{?=url()?}/anjungan/ajax?show=tampilapotek");
    $("#print_nomor_loket").load("{?=url()?}/anjungan/ajax?show=printapotek");
  }, 1000);
})
function printDiv(eleId){
    var PW = window.open('', '_blank', 'Print content');
    PW.document.write(document.getElementById(eleId).innerHTML);
    PW.document.close();
    PW.focus();
    PW.print();
    PW.close();
    window.location.href = "{?=url('anjungan/apotek/ambilantrian')?}";
}
$(function() {
    $('#norm')
    .keyboard({
      layout: 'custom',
      customLayout: {
        'normal' : [
          '8 9 . {b}',
          '4 5 6 7',
          '0 1 2 3',
          '{accept} {cancel}'
        ]
      },
      maxLength : 6,
      // Prevent keys not in the displayed keyboard from being typed in
      restrictInput : true,
      // include lower case characters (added v1.25.7)
      restrictInclude : 'a b c d e f',
      // don't use combos or A+E could become a ligature
      useCombos : false,
      // activate the "validate" callback function
      acceptValid : true,
      validate : function(keyboard, value, isClosing){
        // only make valid if input is 6 characters in length
        return value.length === 6;
      }
    })
    //.addTyping();
});
</script>
</body>
</html>
